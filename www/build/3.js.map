{"version":3,"sources":["../../src/pages/instructorenquiry-list/instructorenquiry-list.module.ts","../../src/pages/instructorenquiry-list/instructorenquiry-list.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { InstructorEnquiryListPage } from './instructorenquiry-list';\n\n@NgModule({\n  declarations: [\n    InstructorEnquiryListPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(InstructorEnquiryListPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    InstructorEnquiryListPage\n  ]\n})\nexport class InstructorEnquiryListPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/instructorenquiry-list/instructorenquiry-list.module.ts","import { Component } from '@angular/core';\nimport {\n  IonicPage,\n  ModalController,\n  NavController,\n  NavParams,\n  ToastController,\n  AlertController,\n  LoadingController,\n  Alert\n} from 'ionic-angular';\nimport { Vibration } from '@ionic-native/vibration';\nimport { ItemSliding } from \"ionic-angular/umd\";\nimport * as _ from 'lodash';\nimport { Programs, User, Center, Instructor } from '../../providers';\nimport { Storage } from '@ionic/storage';\nimport { isGeneratedFile } from '@angular/compiler/src/aot/util';\nimport { CallNumber } from '@ionic-native/call-number/ngx';\n\n@IonicPage()\n@Component({\n  selector: 'instructorenquiry-lists',\n  templateUrl: 'instructorenquiry-list.html'\n})\nexport class InstructorEnquiryListPage {\n\n  currentItems;\n  tempCurrentItems;\n  user;\n  allUsers;\n  allCenters;\n\n  constructor(\n    public vibration: Vibration,\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public modalCtrl: ModalController,\n    public toastCtrl: ToastController,\n    private alertCtrl: AlertController,\n    public loadingCtrl: LoadingController,\n    public programs: Programs,\n    public storage: Storage,\n    public users: User,\n    public centers: Center,\n    public callNumber: CallNumber,\n    public alertController: AlertController,\n    public instructorService: Instructor\n  ) {\n    this.instructorService.query().subscribe((res: any) => {\n      this.currentItems = res;\n      this.tempCurrentItems = res;\n      this.storage.get('user').then((value) => {\n        this.user = value;\n        if (this.user.role != 'admin') {\n          this.currentItems = _.filter(this.currentItems, function (item) {\n            return (item.enquiry_by == this.user._id)\n          });\n          this.tempCurrentItems = this.currentItems;\n        }\n      });\n    }, err => {\n      console.error('ERROR', err);\n    });\n\n    this.users.users_list().subscribe((res: any) => {\n      this.allUsers = res;\n    }, err => {\n      console.error('ERROR', err);\n    });\n\n    this.centers.query().subscribe((res: any) => {\n      this.allCenters = res;\n    }, err => {\n      console.error('ERROR', err);\n    });\n  }\n\n  // Nested filtering of records to users under them\n\n  getItems(ev) {\n    let val = ev.data.toUpperCase();\n    if (!val || !val.trim()) {\n      this.currentItems = this.tempCurrentItems;\n      return;\n    }\n    this.currentItems = _.filter(this.tempCurrentItems, function (item) {\n      return (item.name.toUpperCase().indexOf(ev.name.toUpperCase()) >= 0 ||\n        item.franchise_state.toUpperCase().indexOf(ev.name.toUpperCase()) >= 0 ||\n        item.franchise_district.toUpperCase().indexOf(ev.name.toUpperCase()) >= 0 ||\n        item.franchise_area.toUpperCase().indexOf(ev.name.toUpperCase()) >= 0 ||\n        item.mobile_no.toUpperCase().indexOf(ev.name.toUpperCase()) >= 0 ||\n        item.email_id.toUpperCase().indexOf(ev.name.toUpperCase()) >= 0)\n    });\n  }\n\n  view(instructor, slidingItem: ItemSliding) {\n    slidingItem.close();\n    this.navCtrl.push('ProgramDetailPage', {\n      instructor: instructor\n    });\n  }\n\n  add() {\n    this.navCtrl.push('FranchiseEnquiryAddPage');\n  }\n\n  edit(instructor, slidingItem: ItemSliding) {\n    slidingItem.close();\n    this.navCtrl.push('FranchiseEnquiryAddPage');\n  }\n\n  call(instructor, slidingItem: ItemSliding) {\n    slidingItem.close();\n    this.callNumber.callNumber(instructor.mobile_no, true)\n      .then(res => console.log('Launched dialer!', res))\n      .catch(err => console.log('Error launching dialer', err));\n  }\n\n  email(instructor, slidingItem: ItemSliding) {\n    slidingItem.close();\n    window.open(`mailto:${instructor.email_id}`, '_system');\n  }\n\n  confirm(instructor, slidingItem: ItemSliding) {\n    slidingItem.close();\n    this.presentAlertConfirm(instructor);\n  }\n\n  async presentAlertConfirm(instructor) {\n    const alert = await this.alertController.create({\n      title: 'Confirm?',\n      subTitle: '',\n      message: 'Are you sure you want to Confirm this Enquiry?',\n      buttons: [\n        {\n          text: 'Cancel',\n          role: 'cancel',\n          handler: (blah) => {\n            console.log('Confirm Cancel: blah');\n          }\n        }, {\n          text: 'Confirm',\n          handler: () => {\n            instructor.status = 'confirm';\n            this.instructorService.update(instructor).subscribe((resp) => {\n            }, (err) => {\n              let toast = this.toastCtrl.create({\n                message: \"Error in rejecting this Enquiry. Please try again.\",\n                duration: 3000,\n                position: 'top'\n              });\n              toast.present();\n            });\n          }\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n\n  reject(instructor, slidingItem: ItemSliding) {\n    slidingItem.close();\n    this.presentAlertReject(instructor);\n  }\n\n  async presentAlertReject(instructor) {\n    const alert = await this.alertController.create({\n      title: 'Reject?',\n      subTitle: '',\n      message: 'Are you sure you want to Reject this Enquiry? Once rejected you cannot do actions on this Enquiry again.',\n      buttons: [\n        {\n          text: 'Cancel',\n          role: 'cancel',\n          handler: (blah) => {\n            console.log('Confirm Cancel: blah');\n          }\n        }, {\n          text: 'Confirm',\n          handler: () => {\n            instructor.status = 'reject';\n            this.instructorService.update(instructor).subscribe((resp) => {\n            }, (err) => {\n              let toast = this.toastCtrl.create({\n                message: \"Error in rejecting this Enquiry. Please try again.\",\n                duration: 3000,\n                position: 'top'\n              });\n              toast.present();\n            });\n          }\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n\n  pressEvent(ev) {\n    this.vibration.vibrate(150);\n    let toast = this.toastCtrl.create({\n      message: \"please right or left slide to get the options.\",\n      duration: 2000,\n      position: 'top'\n    });\n    toast.present();\n  }\n\n  findUser(id) {\n    return (_.find(this.allUsers, { _id: id }));\n  }\n\n  findLocation(id) {\n    return (_.find(this.allCenters, { _id: id }));\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/instructorenquiry-list/instructorenquiry-list.ts"],"sourceRoot":""}