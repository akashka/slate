{"version":3,"sources":["../../src/pages/franchiseenquiry-list/franchiseenquiry-list.module.ts","../../src/pages/franchiseenquiry-list/franchiseenquiry-list.ts"],"names":[],"mappings":"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","file":"6.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { FranchiseEnquiryListPage } from './franchiseenquiry-list';\n\n@NgModule({\n  declarations: [\n    FranchiseEnquiryListPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(FranchiseEnquiryListPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    FranchiseEnquiryListPage\n  ]\n})\nexport class FranchiseEnquiryListPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/franchiseenquiry-list/franchiseenquiry-list.module.ts","import { Component } from '@angular/core';\nimport {\n  IonicPage,\n  ModalController,\n  NavController,\n  NavParams,\n  ToastController,\n  AlertController,\n  LoadingController,\n  Alert\n} from 'ionic-angular';\nimport { Vibration } from '@ionic-native/vibration';\nimport { ItemSliding } from \"ionic-angular/umd\";\nimport * as _ from 'lodash';\nimport { Programs, Franchise, User, Center } from '../../providers';\nimport { Storage } from '@ionic/storage';\nimport { isGeneratedFile } from '@angular/compiler/src/aot/util';\nimport { CallNumber } from '@ionic-native/call-number/ngx';\n\n@IonicPage()\n@Component({\n  selector: 'franchiseenquiry-lists',\n  templateUrl: 'franchiseenquiry-list.html'\n})\nexport class FranchiseEnquiryListPage {\n\n  currentItems;\n  tempCurrentItems;\n  user;\n  allUsers;\n  allCenters;\n\n  constructor(\n    public vibration: Vibration,\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public modalCtrl: ModalController,\n    public toastCtrl: ToastController,\n    private alertCtrl: AlertController,\n    public loadingCtrl: LoadingController,\n    public programs: Programs,\n    public franchise: Franchise,\n    public storage: Storage,\n    public users: User,\n    public centers: Center,\n    public callNumber: CallNumber,\n    public alertController: AlertController\n  ) {\n    this.franchise.query().subscribe((res: any) => {\n      this.currentItems = res;\n      this.tempCurrentItems = res;\n      this.storage.get('user').then((value) => {\n        this.user = value;\n        if (this.user.role != 'admin') {\n          this.currentItems = _.filter(this.currentItems, function (item) {\n            return (item.enquiry_by == this.user._id)\n          });\n          this.tempCurrentItems = this.currentItems;\n        }\n      });\n    }, err => {\n      console.error('ERROR', err);\n    });\n\n    this.users.users_list().subscribe((res: any) => {\n      this.allUsers = res;\n    }, err => {\n      console.error('ERROR', err);\n    });\n\n    this.centers.query().subscribe((res: any) => {\n      this.allCenters = res;\n    }, err => {\n      console.error('ERROR', err);\n    });\n  }\n\n  // Nested filtering of records to users under them\n\n  getItems(ev) {\n    let val = ev.data.toUpperCase();\n    if (!val || !val.trim()) {\n      this.currentItems = this.tempCurrentItems;\n      return;\n    }\n    this.currentItems = _.filter(this.tempCurrentItems, function (item) {\n      return (item.name.toUpperCase().indexOf(ev.name.toUpperCase()) >= 0 ||\n        item.franchise_state.toUpperCase().indexOf(ev.name.toUpperCase()) >= 0 ||\n        item.franchise_district.toUpperCase().indexOf(ev.name.toUpperCase()) >= 0 ||\n        item.franchise_area.toUpperCase().indexOf(ev.name.toUpperCase()) >= 0 ||\n        item.mobile_no.toUpperCase().indexOf(ev.name.toUpperCase()) >= 0 ||\n        item.email_id.toUpperCase().indexOf(ev.name.toUpperCase()) >= 0)\n    });\n  }\n\n  view(program, slidingItem: ItemSliding) {\n    slidingItem.close();\n    this.navCtrl.push('ProgramDetailPage', {\n      program: program\n    });\n  }\n\n  add() {\n    this.navCtrl.push('FranchiseEnquiryAddPage');\n  }\n\n  edit(franchiseEnquiry, slidingItem: ItemSliding) {\n    slidingItem.close();\n    this.navCtrl.push('FranchiseEnquiryAddPage');\n  }\n\n  followup(franchiseEnquiry, slidingItem: ItemSliding) {\n    slidingItem.close();\n    this.navCtrl.push('FollowupPage', {\n      franchiseEnquiry: franchiseEnquiry\n    });\n  }\n\n  call(franchiseEnquiry, slidingItem: ItemSliding) {\n    slidingItem.close();\n    this.callNumber.callNumber(franchiseEnquiry.mobile_no, true)\n      .then(res => console.log('Launched dialer!', res))\n      .catch(err => console.log('Error launching dialer', err));\n  }\n\n  email(franchiseEnquiry, slidingItem: ItemSliding) {\n    slidingItem.close();\n    window.open(`mailto:${franchiseEnquiry.email_id}`, '_system');\n  }\n\n  confirm(franchiseEnquiry, slidingItem: ItemSliding) {\n    slidingItem.close();\n    this.navCtrl.push('FranchiseEnquiryAddPage');\n  }\n\n  reject(franchiseEnquiry, slidingItem: ItemSliding) {\n    slidingItem.close();\n    this.presentAlertConfirm(franchiseEnquiry);\n  }\n\n  async presentAlertConfirm(franchiseEnquiry) {\n    const alert = await this.alertController.create({\n      title: 'Confirm!',\n      subTitle: '',\n      message: 'Are you sure you want to Reject this Enquiry? Once rejected you cannot do actions on this Enquiry again.',\n      buttons: [\n        {\n          text: 'Cancel',\n          role: 'cancel',\n          handler: (blah) => {\n            console.log('Confirm Cancel: blah');\n          }\n        }, {\n          text: 'Confirm',\n          handler: () => {\n            franchiseEnquiry.status = 'reject';\n            this.franchise.update(franchiseEnquiry).subscribe((resp) => {\n            }, (err) => {\n              let toast = this.toastCtrl.create({\n                message: \"Error in rejecting this Enquiry. Please try again.\",\n                duration: 3000,\n                position: 'top'\n              });\n              toast.present();\n            });\n          }\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n\n  pressEvent(ev) {\n    this.vibration.vibrate(150);\n    let toast = this.toastCtrl.create({\n      message: \"please right or left slide to get the options.\",\n      duration: 2000,\n      position: 'top'\n    });\n    toast.present();\n  }\n\n  findUser(id) {\n    return (_.find(this.allUsers, { _id: id }));\n  }\n\n  findLocation(id, type, franchise_type) {\n    if (type == franchise_type) return id;\n    return (_.find(this.allCenters, { _id: id }));\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/franchiseenquiry-list/franchiseenquiry-list.ts"],"sourceRoot":""}